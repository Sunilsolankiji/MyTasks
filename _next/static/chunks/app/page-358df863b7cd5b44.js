(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1483:(e,t,a)=>{"use strict";a.d(t,{D:()=>i,ThemeProvider:()=>n});var s=a(5155),r=a(2115);let l=(0,r.createContext)({theme:"light",setTheme:()=>null,toggleTheme:()=>null});function n(e){let{children:t,defaultTheme:a="light",storageKey:n="ui-theme",...i}=e,[o,c]=(0,r.useState)(a);return(0,r.useEffect)(()=>{let e=window.localStorage.getItem(n);e&&c(e)},[n]),(0,r.useEffect)(()=>{let e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(o)},[o]),(0,s.jsx)(l.Provider,{...i,value:{theme:o,setTheme:e=>{window.localStorage.setItem(n,e),c(e)},toggleTheme:()=>{let e="light"===o?"dark":"light";window.localStorage.setItem(n,e),c(e)}},children:t})}let i=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},4245:(e,t,a)=>{Promise.resolve().then(a.bind(a,4632))},4632:(e,t,a)=>{"use strict";a.d(t,{default:()=>tC});var s=a(5155),r=a(2115),l=a(6874),n=a.n(l),i=a(8046),o=a(8271),c=a(9708),d=a(2085),m=a(9434);let u=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:n=!1,...i}=e,o=n?c.DX:"button";return(0,s.jsx)(o,{className:(0,m.cn)(u({variant:r,size:l,className:a})),ref:t,...i})});f.displayName="Button";var h=a(6936),x=a(8027),p=a(1483);function g(){let{theme:e,toggleTheme:t}=(0,p.D)();return(0,s.jsxs)(f,{variant:"ghost",size:"icon",onClick:t,"aria-label":"Toggle theme",children:[(0,s.jsx)(h.A,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,s.jsx)(x.A,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}function j(e){let{projectName:t,onOpenTaskDialog:a,onOpenSettingsDialog:r,isSticky:l}=e;return(0,s.jsx)("header",{className:(0,m.cn)("flex items-center justify-center w-full bg-background h-20 px-4 border-b",l&&"sticky top-0 z-20 bg-background/95 backdrop-blur-md"),children:(0,s.jsxs)("div",{className:"container flex gap-6 justify-between items-center",children:[(0,s.jsxs)(n(),{className:"flex items-center space-x-2",href:"/",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",className:"h-6 w-6",children:[(0,s.jsx)("rect",{width:"256",height:"256",fill:"none"}),(0,s.jsx)("path",{d:"M128,24a104,104,0,1,0,104,104A104.2,104.2,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a48,48,0,0,1-96,0Z",fill:"currentColor"})]}),(0,s.jsx)("span",{className:"font-bold sm:inline-block",children:t})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(f,{onClick:a,children:[(0,s.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Add Task"]}),(0,s.jsxs)(f,{variant:"ghost",size:"icon",onClick:r,children:[(0,s.jsx)(o.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Settings"})]}),(0,s.jsx)(g,{})]})]})})}var v=a(2177),y=a(221),w=a(5594),N=a(3013),b=a(172),k=a(4601),S=a(1920),C=a(5066),D=a(5318),A=a(6318),T=a(965),I=a(3158),R=a(3900);function E(e){let{className:t,classNames:a,showOutsideDays:r=!0,...l}=e;return(0,s.jsx)(R.hv,{showOutsideDays:r,className:(0,m.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,m.cn)(u({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,m.cn)(u({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(T.A,{className:(0,m.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(I.A,{className:(0,m.cn)("h-4 w-4",t),...a})}},...l})}E.displayName="Calendar";var z=a(5452);let L=z.bL;z.l9;let F=z.ZL;z.bm;let O=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(z.hJ,{ref:t,className:(0,m.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});O.displayName=z.hJ.displayName;let _=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(F,{children:[(0,s.jsx)(O,{}),(0,s.jsxs)(z.UC,{ref:t,className:(0,m.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[r,(0,s.jsxs)(z.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(D.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});_.displayName=z.UC.displayName;let P=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,m.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};P.displayName="DialogHeader";let M=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,m.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};M.displayName="DialogFooter";let W=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(z.hE,{ref:t,className:(0,m.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});W.displayName=z.hE.displayName;let U=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(z.VY,{ref:t,className:(0,m.cn)("text-sm text-muted-foreground",a),...r})});U.displayName=z.VY.displayName;var V=a(968);let J=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),H=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(V.b,{ref:t,className:(0,m.cn)(J(),a),...r})});H.displayName=V.b.displayName;let B=v.Op,q=r.createContext({}),Z=e=>{let{...t}=e;return(0,s.jsx)(q.Provider,{value:{name:t.name},children:(0,s.jsx)(v.xI,{...t})})},Y=()=>{let e=r.useContext(q),t=r.useContext(G),{getFieldState:a,formState:s}=(0,v.xW)(),l=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...l}},G=r.createContext({}),K=r.forwardRef((e,t)=>{let{className:a,...l}=e,n=r.useId();return(0,s.jsx)(G.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,m.cn)("space-y-2",a),...l})})});K.displayName="FormItem";let X=r.forwardRef((e,t)=>{let{className:a,...r}=e,{error:l,formItemId:n}=Y();return(0,s.jsx)(H,{ref:t,className:(0,m.cn)(l&&"text-destructive",a),htmlFor:n,...r})});X.displayName="FormLabel";let Q=r.forwardRef((e,t)=>{let{...a}=e,{error:r,formItemId:l,formDescriptionId:n,formMessageId:i}=Y();return(0,s.jsx)(c.DX,{ref:t,id:l,"aria-describedby":r?"".concat(n," ").concat(i):"".concat(n),"aria-invalid":!!r,...a})});Q.displayName="FormControl",r.forwardRef((e,t)=>{let{className:a,...r}=e,{formDescriptionId:l}=Y();return(0,s.jsx)("p",{ref:t,id:l,className:(0,m.cn)("text-sm text-muted-foreground",a),...r})}).displayName="FormDescription";let $=r.forwardRef((e,t)=>{var a;let{className:r,children:l,...n}=e,{error:i,formMessageId:o}=Y(),c=i?String(null!=(a=null==i?void 0:i.message)?a:""):l;return c?(0,s.jsx)("p",{ref:t,id:o,className:(0,m.cn)("text-sm font-medium text-destructive",r),...n,children:c}):null});$.displayName="FormMessage";let ee=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,m.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});ee.displayName="Input";var et=a(547);let ea=et.bL,es=et.l9;et.Mz;let er=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:l=4,...n}=e;return(0,s.jsx)(et.ZL,{children:(0,s.jsx)(et.UC,{ref:t,align:r,sideOffset:l,className:(0,m.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});er.displayName=et.UC.displayName;let el=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,m.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});el.displayName="Textarea";var en=a(4059),ei=a(154);let eo=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(en.bL,{className:(0,m.cn)("grid gap-2",a),...r,ref:t})});eo.displayName=en.bL.displayName;let ec=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(en.q7,{ref:t,className:(0,m.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:(0,s.jsx)(en.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(ei.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});ec.displayName=en.q7.displayName;var ed=a(7481);function em(e){let{isOpen:t,onClose:a,onSubmit:l,task:n}=e,[o,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),h=!!n,{toast:x}=(0,ed.dj)(),{rewriterState:p}=function(){let[e,t]=(0,r.useState)("checking");return(0,r.useEffect)(()=>{let e=setTimeout(()=>{!async function(){if(!window.ai){console.log("On-device AI not supported by this browser."),t("unsupported");return}if(window.ai.canCreateTextRewriter)try{let e=await window.ai.canCreateTextRewriter();console.log("On-device AI rewriter availability state:",e),"readily"===e?t("ready"):t("unsupported")}catch(e){console.error("Error checking on-device AI rewriter:",e),t("error")}else t("unsupported")}()},100);return()=>clearTimeout(e)},[]),{rewriterState:e}}(),[g,j]=(0,r.useState)(!1),[T,I]=(0,r.useState)(!1),R=(0,r.useMemo)(()=>w.z.object({title:w.z.string().min(1,"Title is required"),priority:w.z.enum(["low","medium","high"]),date:w.z.date().optional(),notes:w.z.string().optional(),attachment:w.z.any().optional(),referenceLinks:w.z.array(w.z.string().url({message:"Please enter a valid URL."}).or(w.z.literal(""))).optional()}),[]),z=(0,v.mN)({resolver:(0,y.u)(R)}),{fields:F,append:O,remove:V}=(0,v.jz)({control:z.control,name:"referenceLinks"});(0,r.useEffect)(()=>{t&&(u(!1),j(!1),I(!1),n?z.reset({title:n.title,priority:n.priority||"medium",date:n.date,notes:n.notes||"",attachment:void 0,referenceLinks:n.referenceLinks||[]}):z.reset({title:"",priority:"medium",date:new Date,notes:"",attachment:void 0,referenceLinks:[]}))},[t,n,z]);let J=async()=>{if("ready"!==p||g||!window.ai)return;let e=z.getValues("title");if(e.trim()){j(!0);try{let t=await window.ai.createTextRewriter(),a=await t.rewrite(e);z.setValue("title",a.trim(),{shouldValidate:!0}),t.close()}catch(e){console.error("Failed to rewrite title:",e),x({title:"AI Rewrite Failed",description:"Could not generate a new title. Please try again.",variant:"destructive"})}finally{j(!1)}}},H=async()=>{if("ready"!==p||T||!window.ai)return;let e=z.getValues("notes");if(e&&e.trim()){I(!0);try{let t=await window.ai.createTextRewriter(),a=await t.rewrite(e);z.setValue("notes",a.trim(),{shouldValidate:!0}),t.close()}catch(e){console.error("Failed to rewrite notes:",e),x({title:"AI Rewrite Failed",description:"Could not rewrite the notes. Please try again.",variant:"destructive"})}finally{I(!1)}}},q=async e=>{var t;let s=null==n?void 0:n.attachment,r=null==n?void 0:n.attachmentName;if(d&&(s=void 0,r=void 0),e.attachment&&e.attachment.length>0){let t=e.attachment[0];r=t.name;try{s=await new Promise((e,a)=>{let s=new FileReader;s.onload=t=>{var s;(null==(s=t.target)?void 0:s.result)?e(t.target.result):a(Error("Failed to read file."))},s.onerror=e=>{a(e)},s.readAsDataURL(t)})}catch(e){console.error("Error reading file:",e);return}}l({title:e.title,priority:e.priority,date:e.date,notes:e.notes,attachment:s,attachmentName:r,referenceLinks:(null==(t=e.referenceLinks)?void 0:t.filter(e=>e&&""!==e.trim()))||[]}),a()};return(0,s.jsx)(L,{open:t,onOpenChange:e=>{e||a()},children:(0,s.jsx)(_,{className:"sm:max-w-md p-0",children:(0,s.jsx)(B,{...z,children:(0,s.jsxs)("form",{onSubmit:z.handleSubmit(q),className:"flex flex-col max-h-[90vh]",children:[(0,s.jsxs)(P,{className:"p-6 pb-4",children:[(0,s.jsx)(W,{children:h?"Edit Task":"Add New Task"}),(0,s.jsx)(U,{children:h?"Update the details of your task.":"Fill in the details below to add a new task to your schedule."})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-6",children:(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsx)(Z,{control:z.control,name:"title",render:e=>{let{field:t}=e;return(0,s.jsxs)(K,{children:[(0,s.jsx)(X,{children:"Task Title"}),(0,s.jsx)(Q,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(ee,{placeholder:"e.g., Complete project report",...t}),"ready"===p&&(0,s.jsxs)(f,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8",onClick:J,disabled:g||!t.value,title:"Rewrite with AI",children:[g?(0,s.jsx)(b.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(k.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Rewrite with AI"})]})]})}),(0,s.jsx)($,{})]})}}),(0,s.jsx)(Z,{control:z.control,name:"priority",render:e=>{let{field:t}=e;return(0,s.jsxs)(K,{className:"space-y-2",children:[(0,s.jsx)(X,{children:"Priority"}),(0,s.jsx)(Q,{children:(0,s.jsxs)(eo,{onValueChange:t.onChange,value:t.value,className:"flex space-x-4",children:[(0,s.jsxs)(K,{className:"flex items-center space-x-2 space-y-0",children:[(0,s.jsx)(Q,{children:(0,s.jsx)(ec,{value:"low"})}),(0,s.jsx)(X,{className:"font-normal",children:"Low"})]}),(0,s.jsxs)(K,{className:"flex items-center space-x-2 space-y-0",children:[(0,s.jsx)(Q,{children:(0,s.jsx)(ec,{value:"medium"})}),(0,s.jsx)(X,{className:"font-normal",children:"Medium"})]}),(0,s.jsxs)(K,{className:"flex items-center space-x-2 space-y-0",children:[(0,s.jsx)(Q,{children:(0,s.jsx)(ec,{value:"high"})}),(0,s.jsx)(X,{className:"font-normal",children:"High"})]})]})}),(0,s.jsx)($,{})]})}}),(0,s.jsx)(Z,{control:z.control,name:"date",render:e=>{let{field:t}=e;return(0,s.jsxs)(K,{className:"flex flex-col",children:[(0,s.jsx)(X,{children:"Date"}),(0,s.jsxs)(ea,{open:o,onOpenChange:c,children:[(0,s.jsx)(es,{asChild:!0,children:(0,s.jsx)(Q,{children:(0,s.jsxs)(f,{variant:"outline",className:(0,m.cn)("w-full pl-3 text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,N.GP)(t.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"}),(0,s.jsx)(S.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(er,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(E,{mode:"single",selected:t.value,onSelect:e=>{t.onChange(e),c(!1)},disabled:e=>e<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]}),(0,s.jsx)($,{})]})}}),(0,s.jsx)(Z,{control:z.control,name:"notes",render:e=>{let{field:t}=e;return(0,s.jsxs)(K,{children:[(0,s.jsx)(X,{children:"Notes"}),(0,s.jsx)(Q,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(el,{placeholder:"Add any relevant notes...",className:"resize-none pr-10",...t}),"ready"===p&&(0,s.jsxs)(f,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1.5 h-8 w-8",onClick:H,disabled:T||!t.value,title:"Rewrite with AI",children:[T?(0,s.jsx)(b.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(k.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Rewrite with AI"})]})]})}),(0,s.jsx)($,{})]})}}),(0,s.jsx)(Z,{control:z.control,name:"attachment",render:e=>{var t;let{field:{onChange:a,value:r,...l}}=e;return(0,s.jsxs)(K,{children:[(0,s.jsx)(X,{children:"Attachment"}),(0,s.jsx)(Q,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f,{asChild:!0,variant:"outline",className:"w-full justify-start font-normal text-muted-foreground pr-10",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(C.A,{className:"mr-2 h-4 w-4"}),(null==r||null==(t=r[0])?void 0:t.name)||!d&&(null==n?void 0:n.attachmentName)||"Attach a file"]})}),(0,s.jsx)(ee,{className:"absolute top-0 left-0 h-full w-full opacity-0 cursor-pointer",type:"file",onChange:e=>{a(e.target.files),u(!1)},...l}),((null==r?void 0:r[0])||!d&&(null==n?void 0:n.attachmentName))&&(0,s.jsxs)(f,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8",onClick:()=>{a(null),u(!0)},children:[(0,s.jsx)(D.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Remove attachment"})]})]})}),(0,s.jsx)($,{})]})}}),(0,s.jsxs)(K,{children:[(0,s.jsx)(X,{children:"Reference Links"}),(0,s.jsx)("div",{className:"space-y-2",children:F.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(A.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(Z,{control:z.control,name:"referenceLinks.".concat(t),render:e=>{let{field:t}=e;return(0,s.jsxs)(K,{className:"flex-grow",children:[(0,s.jsx)(Q,{children:(0,s.jsx)(ee,{placeholder:"https://example.com",...t})}),(0,s.jsx)($,{})]})}}),(0,s.jsxs)(f,{type:"button",variant:"ghost",size:"icon",onClick:()=>V(t),children:[(0,s.jsx)(D.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Remove link"})]})]},e.id))}),(0,s.jsxs)(f,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>O(""),children:[(0,s.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Add Link"]})]})]})}),(0,s.jsxs)(M,{className:"p-6 pt-4 border-t",children:[(0,s.jsx)(f,{type:"button",variant:"ghost",onClick:a,children:"Cancel"}),(0,s.jsx)(f,{type:"submit",children:h?"Save Changes":"Add Task"})]})]})})})})}var eu=a(704);let ef=eu.bL,eh=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eu.B8,{ref:t,className:(0,m.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});eh.displayName=eu.B8.displayName;let ex=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eu.l9,{ref:t,className:(0,m.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});ex.displayName=eu.l9.displayName;let ep=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eu.UC,{ref:t,className:(0,m.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});ep.displayName=eu.UC.displayName;var eg=a(5074),ej=a(3587),ev=a(203),ey=a(3926),ew=a(7620),eN=a(3382),eb=a(8793),ek=a(8350),eS=a(5943),eC=a(7223),eD=a(8376),eA=a(7648);let eT=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,m.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});eT.displayName="Card";let eI=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,m.cn)("flex flex-col space-y-1.5 p-6",a),...r})});eI.displayName="CardHeader";let eR=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,m.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});eR.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,m.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let eE=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,m.cn)("p-6 pt-0",a),...r})});eE.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,m.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";var ez=a(6981),eL=a(518);let eF=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ez.bL,{ref:t,className:(0,m.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(ez.C1,{className:(0,m.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(eL.A,{className:"h-4 w-4"})})})});eF.displayName=ez.bL.displayName;var eO=a(8698);let e_=eO.bL,eP=eO.l9;eO.YJ,eO.ZL,eO.Pb,eO.z6,r.forwardRef((e,t)=>{let{className:a,inset:r,children:l,...n}=e;return(0,s.jsxs)(eO.ZP,{ref:t,className:(0,m.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n,children:[l,(0,s.jsx)(I.A,{className:"ml-auto"})]})}).displayName=eO.ZP.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eO.G5,{ref:t,className:(0,m.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=eO.G5.displayName;let eM=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...l}=e;return(0,s.jsx)(eO.ZL,{children:(0,s.jsx)(eO.UC,{ref:t,sideOffset:r,className:(0,m.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});eM.displayName=eO.UC.displayName;let eW=r.forwardRef((e,t)=>{let{className:a,inset:r,...l}=e;return(0,s.jsx)(eO.q7,{ref:t,className:(0,m.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...l})});eW.displayName=eO.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:l,...n}=e;return(0,s.jsxs)(eO.H_,{ref:t,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:l,...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(eO.VF,{children:(0,s.jsx)(eL.A,{className:"h-4 w-4"})})}),r]})}).displayName=eO.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(eO.hN,{ref:t,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(eO.VF,{children:(0,s.jsx)(ei.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=eO.hN.displayName,r.forwardRef((e,t)=>{let{className:a,inset:r,...l}=e;return(0,s.jsx)(eO.JU,{ref:t,className:(0,m.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...l})}).displayName=eO.JU.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eO.wv,{ref:t,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=eO.wv.displayName;let eU=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function eV(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,m.cn)(eU({variant:a}),t),...r})}function eJ(e){let{task:t,onToggleComplete:a,onDelete:r,onEdit:l}=e,n={high:(0,s.jsx)(ew.A,{className:"h-3 w-3"}),medium:(0,s.jsx)(eN.A,{className:"h-3 w-3"}),low:(0,s.jsx)(eb.A,{className:"h-3 w-3"})};return(0,s.jsxs)(eT,{className:(0,m.cn)("transition-all",t.completed&&"bg-muted/50"),children:[(0,s.jsxs)(eI,{className:"flex flex-row items-start justify-between space-y-0 pb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(eF,{id:"task-".concat(t.id),checked:t.completed,onCheckedChange:e=>a(null==t?void 0:t.id,!!e),"aria-label":"Mark task ".concat(t.title," as ").concat(t.completed?"incomplete":"complete")}),(0,s.jsx)(eR,{className:(0,m.cn)("text-lg font-medium",t.completed&&"line-through text-muted-foreground"),children:t.title}),(0,s.jsx)(eV,{variant:"high"===t.priority?"destructive":"medium"===t.priority?"secondary":"outline",className:"capitalize",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[n[t.priority],(0,s.jsx)("span",{children:t.priority})]})})]}),(0,s.jsxs)(e_,{children:[(0,s.jsx)(eP,{asChild:!0,children:(0,s.jsx)(f,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(ek.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(eM,{align:"end",children:[(0,s.jsxs)(eW,{onClick:()=>l(t),children:[(0,s.jsx)(eS.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Edit"})]}),(0,s.jsxs)(eW,{onClick:()=>r(t.id),className:"text-destructive",children:[(0,s.jsx)(eC.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Delete"})]})]})]})]}),(0,s.jsx)(eE,{children:(0,s.jsxs)("div",{className:"pl-9",children:[(0,s.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[t.date&&(0,s.jsxs)("div",{className:"flex items-center pt-1",children:[(0,s.jsx)(S.A,{className:"mr-2 h-4 w-4"}),(0,s.jsxs)("span",{children:["Due: ",(0,N.GP)(new Date(t.date),"PPP")]})]}),t.notes&&(0,s.jsx)("p",{className:"pt-2",children:t.notes}),t.attachment&&t.attachmentName&&(0,s.jsxs)("div",{className:"flex items-center pt-2 text-primary",children:[(0,s.jsx)(C.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("a",{href:t.attachment,download:t.attachmentName,className:"hover:underline",children:t.attachmentName})]}),t.referenceLinks&&t.referenceLinks.length>0&&(0,s.jsx)("div",{className:"pt-2 space-y-1",children:t.referenceLinks.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center text-primary",children:[(0,s.jsx)(A.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}),(0,s.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"hover:underline truncate",title:e,children:e})]},t))})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center pt-4 text-xs text-muted-foreground",children:[t.completed&&t.completionDate?(0,s.jsxs)("div",{className:"flex items-center text-primary",children:[(0,s.jsx)(eD.A,{className:"mr-1.5 h-3 w-3"}),(0,s.jsxs)("span",{children:["Completed: ",(0,N.GP)(new Date(t.completionDate),"PPp")]})]}):(0,s.jsx)("div",{}),t.creationDate&&(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(eA.A,{className:"mr-1.5 h-3 w-3"}),(0,s.jsxs)("span",{children:["Created: ",(0,N.GP)(new Date(t.creationDate),"PPp")]})]})]})]})})]})}function eH(e){let{tasks:t,onToggleComplete:a,onDelete:r,onEdit:l}=e;return 0===t.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-muted-foreground/30 bg-muted/20 p-12 text-center",children:[(0,s.jsx)("h3",{className:"text-xl font-medium",children:"No Tasks Here!"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"You haven't added any tasks to this list yet."})]}):(0,s.jsx)("div",{className:"space-y-4 max-w-2xl mx-auto",children:t.map(e=>(0,s.jsx)(eJ,{task:e,onToggleComplete:a,onDelete:r,onEdit:l},e.id))})}var eB=a(1992),eq=a(9556),eZ=a(7381);let eY=eB.bL;eB.YJ;let eG=eB.WT,eK=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(eB.l9,{ref:t,className:(0,m.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,s.jsx)(eB.In,{asChild:!0,children:(0,s.jsx)(eq.A,{className:"h-4 w-4 opacity-50"})})]})});eK.displayName=eB.l9.displayName;let eX=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eB.PP,{ref:t,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(eZ.A,{className:"h-4 w-4"})})});eX.displayName=eB.PP.displayName;let eQ=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eB.wn,{ref:t,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(eq.A,{className:"h-4 w-4"})})});eQ.displayName=eB.wn.displayName;let e$=r.forwardRef((e,t)=>{let{className:a,children:r,position:l="popper",...n}=e;return(0,s.jsx)(eB.ZL,{children:(0,s.jsxs)(eB.UC,{ref:t,className:(0,m.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:[(0,s.jsx)(eX,{}),(0,s.jsx)(eB.LM,{className:(0,m.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(eQ,{})]})})});e$.displayName=eB.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eB.JU,{ref:t,className:(0,m.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=eB.JU.displayName;let e0=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(eB.q7,{ref:t,className:(0,m.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(eB.VF,{children:(0,s.jsx)(eL.A,{className:"h-4 w-4"})})}),(0,s.jsx)(eB.p4,{children:r})]})});function e1(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,m.cn)("animate-pulse rounded-md bg-muted",t),...a})}function e2(){return(0,s.jsx)("div",{className:"space-y-4 max-w-2xl mx-auto",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)(eT,{children:[(0,s.jsxs)(eI,{className:"flex flex-row items-start justify-between space-y-0 pb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(e1,{className:"h-4 w-4 rounded-sm"}),(0,s.jsx)(e1,{className:"h-6 w-48"})]}),(0,s.jsx)(e1,{className:"h-8 w-8"})]}),(0,s.jsx)(eE,{children:(0,s.jsxs)("div",{className:"pl-9",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(e1,{className:"h-4 w-[250px]"}),(0,s.jsx)(e1,{className:"h-4 w-[200px]"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,s.jsx)("div",{}),(0,s.jsx)(e1,{className:"h-4 w-40"})]})]})})]},t))})}e0.displayName=eB.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eB.wv,{ref:t,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=eB.wv.displayName;var e4=a(7489);let e5=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:l=!0,...n}=e;return(0,s.jsx)(e4.b,{ref:t,decorative:l,orientation:r,className:(0,m.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...n})});e5.displayName=e4.b.displayName;var e8=a(3662),e3=a(6923),e9=a(8718);async function e6(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="79e975a0a25e4cefa6b171854252706";if(!a)throw Error("The weather service has not been configured by the site owner. Please add NEXT_PUBLIC_WEATHER_API_KEY to your environment variables.");let s=new URL("".concat("https://api.weatherapi.com/v1","/").concat(e));for(let[e,r]of(s.searchParams.append("key",a),Object.entries(t)))s.searchParams.append(e,r);let r=await fetch(s.toString());if(!r.ok){var l;throw Error((null==(l=(await r.json()).error)?void 0:l.message)||"API request failed with status ".concat(r.status))}return r.json()}async function e7(e){return e6("current.json",{q:e})}async function te(e){return e?e6("search.json",{q:e}):[]}var tt=a(4884);let ta=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(tt.bL,{className:(0,m.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:t,children:(0,s.jsx)(tt.zi,{className:(0,m.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});ta.displayName=tt.bL.displayName;let ts=w.z.object({projectName:w.z.string().min(1,"Project name is required."),stickyHeader:w.z.boolean(),stickyFilterBar:w.z.boolean(),location:w.z.string().optional(),showWeatherWidget:w.z.boolean(),weatherEffectMode:w.z.enum(["dynamic","all","sunny","windy","cloudy","rain","snow","none"])}),tr=e=>{let{className:t}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,m.cn)("h-4 w-4 loader-spin",t),children:(0,s.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})};function tl(e){let{isOpen:t,onClose:a,projectName:l,onUpdateProjectName:n,onExportClick:i,onImportFileSelect:o,location:c,onLocationChange:d,showWeatherWidget:m,onToggleWeatherWidget:u,isHeaderSticky:h,onToggleHeaderSticky:x,isFilterBarSticky:p,onToggleFilterBarSticky:g,weatherEffectMode:j,onWeatherEffectModeChange:w}=e,N=(0,v.mN)({resolver:(0,y.u)(ts),defaultValues:{projectName:l,location:"",showWeatherWidget:m,stickyHeader:h,stickyFilterBar:p,weatherEffectMode:j}}),b=(0,r.useRef)(null),k=(0,r.useRef)(null),[S,C]=(0,r.useState)([]),[A,T]=(0,r.useState)(!1),[I,R]=(0,r.useState)(!1),{toast:E}=(0,ed.dj)(),z=(0,r.useRef)(null),[F,O]=(0,r.useState)(c),V=N.watch("showWeatherWidget");(0,r.useEffect)(()=>{t&&(N.reset({projectName:l,location:(null==c?void 0:c.name)||"",showWeatherWidget:m,stickyHeader:h,stickyFilterBar:p,weatherEffectMode:j}),O(c),C([]),R(!1))},[l,t,N,c,m,h,p,j]);let J=(0,r.useCallback)(e=>{if(z.current&&clearTimeout(z.current),!e){C([]),R(!1),T(!1);return}T(!0),R(!0),z.current=setTimeout(async()=>{try{let t=await te(e);C(t)}catch(e){E({title:"Location Search Failed",description:e instanceof Error?e.message:"An unknown error occurred.",variant:"destructive"}),C([])}finally{T(!1)}},500)},[E]),H=e=>{O(e),N.setValue("location",e.name,{shouldValidate:!0}),R(!1)},q=()=>{O(null),N.setValue("location","")};return(0,s.jsx)(L,{open:t,onOpenChange:e=>{e||a()},children:(0,s.jsx)(_,{className:"sm:max-w-[425px] p-0",children:(0,s.jsx)(B,{...N,children:(0,s.jsxs)("form",{onSubmit:N.handleSubmit(e=>{if(e.showWeatherWidget&&!F)return void E({title:"Location Required",description:"Please set a location before enabling the weather widget.",variant:"destructive"});n(e.projectName),x(e.stickyHeader),g(e.stickyFilterBar),d(e.showWeatherWidget?F:null),u(e.showWeatherWidget),w(e.weatherEffectMode),a()}),className:"flex flex-col max-h-[90vh]",children:[(0,s.jsxs)(P,{className:"p-6 pb-4",children:[(0,s.jsx)(W,{children:"Settings"}),(0,s.jsx)(U,{children:"Configure your project settings and manage data."})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-6",children:(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsx)(Z,{control:N.control,name:"projectName",render:e=>{let{field:t}=e;return(0,s.jsxs)(K,{children:[(0,s.jsx)(X,{children:"Project Name"}),(0,s.jsx)(Q,{children:(0,s.jsx)(ee,{...t})}),(0,s.jsx)($,{})]})}}),(0,s.jsx)(e5,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(X,{children:"Appearance"}),(0,s.jsxs)("div",{className:"space-y-4 rounded-lg border p-4",children:[(0,s.jsx)(Z,{control:N.control,name:"stickyHeader",render:e=>{let{field:t}=e;return(0,s.jsxs)(K,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(X,{children:"Sticky Header"}),(0,s.jsx)("p",{className:"text-[0.8rem] text-muted-foreground",children:"Keep the header visible when scrolling."})]}),(0,s.jsx)(Q,{children:(0,s.jsx)(ta,{checked:t.value,onCheckedChange:t.onChange,"aria-label":"Toggle sticky header"})})]})}}),(0,s.jsx)(e5,{}),(0,s.jsx)(Z,{control:N.control,name:"stickyFilterBar",render:e=>{let{field:t}=e;return(0,s.jsxs)(K,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(X,{children:"Sticky Filter & Tabs"}),(0,s.jsx)("p",{className:"text-[0.8rem] text-muted-foreground",children:"Keep filters and tabs visible when scrolling."})]}),(0,s.jsx)(Q,{children:(0,s.jsx)(ta,{checked:t.value,onCheckedChange:t.onChange,"aria-label":"Toggle sticky filter bar"})})]})}}),(0,s.jsx)(e5,{}),(0,s.jsx)(Z,{control:N.control,name:"showWeatherWidget",render:e=>{let{field:t}=e;return(0,s.jsxs)(K,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(X,{children:"Show Weather Widget"}),(0,s.jsx)("p",{className:"text-[0.8rem] text-muted-foreground",children:"Display current weather and effects."})]}),(0,s.jsx)(Q,{children:(0,s.jsx)(ta,{checked:t.value,onCheckedChange:t.onChange,"aria-label":"Toggle weather widget"})})]})}}),V&&(0,s.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(X,{children:"Weather Location"}),(0,s.jsxs)("div",{className:"relative",onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||R(!1)},children:[(0,s.jsx)(Z,{control:N.control,name:"location",render:e=>{let{field:t}=e;return(0,s.jsxs)(K,{children:[(0,s.jsx)(Q,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(e8.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(ee,{...t,placeholder:"Search for a city...",className:"pl-9",onChange:e=>{t.onChange(e),J(e.target.value)},onFocus:()=>{t.value?J(t.value):S.length>0&&R(!0)},autoComplete:"off"}),A&&(0,s.jsx)(tr,{className:"absolute right-9 top-1/2 -translate-y-1/2 h-4 w-4"}),F&&!A&&(0,s.jsxs)(f,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8",onClick:q,children:[(0,s.jsx)(D.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Clear location"})]})]})}),(0,s.jsx)($,{})]})}}),I&&S.length>0&&(0,s.jsx)("div",{ref:k,className:"absolute z-10 w-full bg-background border rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",children:S.map(e=>(0,s.jsxs)("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-accent",onClick:()=>H(e),children:[e.name,", ",e.country]},e.id))})]})]}),(0,s.jsx)(e5,{}),(0,s.jsx)(Z,{control:N.control,name:"weatherEffectMode",render:e=>{let{field:t}=e;return(0,s.jsxs)(K,{children:[(0,s.jsx)(X,{children:"Weather Effects"}),(0,s.jsxs)(eY,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(Q,{children:(0,s.jsx)(eK,{children:(0,s.jsx)(eG,{placeholder:"Select an effect"})})}),(0,s.jsxs)(e$,{children:[(0,s.jsx)(e0,{value:"dynamic",children:"Dynamic"}),(0,s.jsx)(e0,{value:"none",children:"None"}),(0,s.jsx)(e0,{value:"sunny",children:"Sunny"}),(0,s.jsx)(e0,{value:"cloudy",children:"Cloudy"}),(0,s.jsx)(e0,{value:"windy",children:"Windy"}),(0,s.jsx)(e0,{value:"rain",children:"Rain"}),(0,s.jsx)(e0,{value:"snow",children:"Snow"}),(0,s.jsx)(e0,{value:"all",children:"All"})]})]}),(0,s.jsx)("p",{className:"text-[0.8rem] text-muted-foreground",children:"Choose which weather effect to display."}),(0,s.jsx)($,{})]})}})]})]})]}),(0,s.jsx)(e5,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(X,{children:"Data Management"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(f,{type:"button",variant:"outline",className:"w-full",onClick:i,children:[(0,s.jsx)(e3.A,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,s.jsxs)(f,{type:"button",variant:"outline",className:"w-full",onClick:()=>{var e;null==(e=b.current)||e.click()},children:[(0,s.jsx)(e9.A,{className:"mr-2 h-4 w-4"}),"Import"]}),(0,s.jsx)("input",{type:"file",ref:b,className:"hidden",accept:".json",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&o(a),e.target&&(e.target.value="")}})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select tasks to import or export."})]})]})}),(0,s.jsxs)(M,{className:"p-6 pt-4 border-t",children:[(0,s.jsx)(f,{type:"button",variant:"ghost",onClick:a,children:"Cancel"}),(0,s.jsx)(f,{type:"submit",children:"Save Changes"})]})]})})})})}var tn=a(7655);let ti=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(tn.bL,{ref:t,className:(0,m.cn)("relative overflow-hidden",a),...l,children:[(0,s.jsx)(tn.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(to,{}),(0,s.jsx)(tn.OK,{})]})});ti.displayName=tn.bL.displayName;let to=r.forwardRef((e,t)=>{let{className:a,orientation:r="vertical",...l}=e;return(0,s.jsx)(tn.VM,{ref:t,orientation:r,className:(0,m.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...l,children:(0,s.jsx)(tn.lr,{className:"relative flex-1 rounded-full bg-border"})})});function tc(e){let{isOpen:t,onClose:a,tasks:l,onExport:n}=e,[i,o]=(0,r.useState)({});(0,r.useEffect)(()=>{t&&o(l.reduce((e,t)=>(e[t.id]=!0,e),{}))},[t,l]);let c=e=>{o(l.reduce((t,a)=>(t[a.id]=e,t),{}))},d=(e,t)=>{o(a=>({...a,[e]:t}))},m=Object.values(i).filter(Boolean).length,u=m===l.length&&l.length>0;return(0,s.jsx)(L,{open:t,onOpenChange:e=>!e&&a(),children:(0,s.jsxs)(_,{className:"sm:max-w-md flex flex-col max-h-[90vh]",children:[(0,s.jsxs)(P,{children:[(0,s.jsx)(W,{children:"Export Tasks"}),(0,s.jsx)(U,{children:"Select the tasks you want to export."})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 border-y py-2 px-1",children:[(0,s.jsx)(eF,{id:"select-all-export",checked:u,onCheckedChange:e=>c(!!e),"aria-label":"Select all tasks for export"}),(0,s.jsx)(H,{htmlFor:"select-all-export",className:"text-sm font-medium",children:"Select All"})]}),(0,s.jsx)(ti,{className:"flex-1",children:(0,s.jsx)("div",{className:"space-y-2 pr-4",children:l.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-2 rounded-md hover:bg-muted",children:[(0,s.jsx)(eF,{id:"export-".concat(e.id),checked:!!i[e.id],onCheckedChange:t=>d(e.id,!!t),"aria-labelledby":"export-label-".concat(e.id)}),(0,s.jsx)(H,{htmlFor:"export-".concat(e.id),id:"export-label-".concat(e.id),className:"flex-1 font-normal cursor-pointer",children:e.title})]},e.id))})}),(0,s.jsxs)(M,{className:"pt-4 border-t",children:[(0,s.jsx)(f,{type:"button",variant:"ghost",onClick:a,children:"Cancel"}),(0,s.jsxs)(f,{type:"button",onClick:()=>{n(l.filter(e=>i[e.id])),a()},disabled:0===m,children:["Export (",m,")"]})]})]})})}to.displayName=tn.VM.displayName;let td=(0,d.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),tm=r.forwardRef((e,t)=>{let{className:a,variant:r,...l}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,m.cn)(td({variant:r}),a),...l})});tm.displayName="Alert";let tu=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,m.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});tu.displayName="AlertTitle";let tf=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,m.cn)("text-sm [&_p]:leading-relaxed",a),...r})});tf.displayName="AlertDescription";var th=a(1949);function tx(e){let{isOpen:t,onClose:a,tasksToImport:l,onConfirmImport:n}=e,[i,o]=(0,r.useState)({});(0,r.useEffect)(()=>{t&&o(l.reduce((e,t)=>(e[t.id]=!0,e),{}))},[t,l]);let c=e=>{o(l.reduce((t,a)=>(t[a.id]=e,t),{}))},d=(e,t)=>{o(a=>({...a,[e]:t}))},m=Object.values(i).filter(Boolean).length,u=m===l.length&&l.length>0;return(0,s.jsx)(L,{open:t,onOpenChange:e=>!e&&a(),children:(0,s.jsxs)(_,{className:"sm:max-w-md flex flex-col max-h-[90vh]",children:[(0,s.jsxs)(P,{children:[(0,s.jsx)(W,{children:"Import Preview"}),(0,s.jsx)(U,{children:"Select the tasks you want to import."})]}),(0,s.jsxs)(tm,{children:[(0,s.jsx)(th.A,{className:"h-4 w-4"}),(0,s.jsx)(tu,{children:"Heads up!"}),(0,s.jsx)(tf,{children:"Imported tasks will be added to your current list."})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 border-y py-2 px-1",children:[(0,s.jsx)(eF,{id:"select-all-import",checked:u,onCheckedChange:e=>c(!!e),"aria-label":"Select all tasks for import"}),(0,s.jsx)(H,{htmlFor:"select-all-import",className:"text-sm font-medium",children:"Select All"})]}),(0,s.jsx)(ti,{className:"flex-1",children:(0,s.jsx)("div",{className:"space-y-2 pr-4",children:l.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-2 rounded-md hover:bg-muted",children:[(0,s.jsx)(eF,{id:"import-".concat(e.id),checked:!!i[e.id],onCheckedChange:t=>d(e.id,!!t),"aria-labelledby":"import-label-".concat(e.id)}),(0,s.jsx)(H,{htmlFor:"import-".concat(e.id),id:"import-label-".concat(e.id),className:"flex-1 font-normal cursor-pointer",children:e.title})]},e.id))})}),(0,s.jsxs)(M,{className:"pt-4 border-t",children:[(0,s.jsx)(f,{type:"button",variant:"ghost",onClick:a,children:"Cancel"}),(0,s.jsxs)(f,{type:"button",onClick:()=>{n(l.filter(e=>i[e.id])),a()},disabled:0===m,children:["Import (",m,")"]})]})]})})}var tp=a(3838);let tg=e=>{if(!e)return[];let t=0,a="";switch(e){case"rain":t=100,a="rain-particle";break;case"snow":t=150,a="snow-particle";break;case"cloudy":t=15,a="cloud-particle";break;case"windy":t=50,a="leaf-particle";break;case"sunny":return[(0,s.jsx)("div",{className:"sun-particle"},"sun")]}return Array.from({length:t}).map((t,r)=>{let l={animationDelay:"".concat(5*Math.random(),"s")};return("rain"===e&&(l.left="".concat(100*Math.random(),"vw"),l.transform="translateY(-20vh)",l["--start-y"]="-20vh",l.animationDuration="".concat(.5+.5*Math.random(),"s")),"snow"===e&&(l.left="".concat(100*Math.random(),"vw"),l.transform="translateY(-10vh)",l["--start-y"]="-10vh",l.animationDuration="".concat(5+10*Math.random(),"s")),"cloudy"===e&&(l.left="-250px",l.top="".concat(-10+20*Math.random(),"%"),l["--cloud-scale"]=.5+Math.random(),l.animationDuration="".concat(20+20*Math.random(),"s"),l.animationDelay="".concat(10*Math.random(),"s")),"windy"===e)?(l.left="-30px",l.top="".concat(100*Math.random(),"vh"),l.animationDuration="".concat(4+4*Math.random(),"s"),l.transform="scale(".concat(.8+.4*Math.random(),")"),l.opacity=0,(0,s.jsx)(tp.A,{className:a,style:l},r)):(0,s.jsx)("div",{className:a,style:l},r)})};function tj(e){let{weather:t,mode:a}=e,l=(0,r.useMemo)(()=>{if(!t)return null;let e=t.current.condition.code,a=t.current.is_day,s=t.current.wind_kph,r=t.current.condition.text.toLowerCase();return s>29||r.includes("blizzard")||r.includes("gale")?"windy":e>=1150&&e<=1201||e>=1240&&e<=1252||1063===e?"rain":e>=1204&&e<=1237||e>=1255&&e<=1264||1066===e?"snow":e>=1273&&e<=1282?"rain":1003===e||1006===e||1009===e?"cloudy":1e3===e&&a?"sunny":null},[t]);if("all"===a)return(0,s.jsx)(s.Fragment,{children:["rain","snow","cloudy","windy","sunny"].map(e=>(0,s.jsx)("div",{className:"weather-effect ".concat(e),children:tg(e)},e))});let n="dynamic"===a?l:a;return n&&"none"!==n?(0,s.jsx)("div",{className:"weather-effect ".concat(n),children:tg(n)}):null}var tv=a(8681),ty=a(3640),tw=a(6766);function tN(e){let{location:t,weather:a,isLoading:r}=e;return t?r&&!a?(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground p-2 rounded-lg bg-muted/50",children:[(0,s.jsx)(b.A,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("span",{children:"Loading weather..."})]}):a?(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm p-2 rounded-lg bg-muted/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(e8.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"font-medium",children:a.location.name})]}),(0,s.jsxs)("div",{className:"flex items-center",title:a.current.condition.text,children:[a.current.condition.icon&&(0,s.jsx)(tw.default,{src:"https:".concat(a.current.condition.icon),alt:a.current.condition.text,width:24,height:24}),(0,s.jsxs)("span",{className:"font-medium ml-1",children:[a.current.temp_c,"\xb0C"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",title:"Humidity",children:[(0,s.jsx)(tv.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("span",{children:[a.current.humidity,"%"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",title:"Wind speed",children:[(0,s.jsx)(ty.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("span",{children:[a.current.wind_kph," km/h"]})]})]}):null:null}let tb={high:3,medium:2,low:1},tk=w.z.object({id:w.z.string(),title:w.z.string().min(1,"Title cannot be empty"),date:w.z.string().datetime({offset:!0}).optional().nullable().transform(e=>e?new Date(e):void 0),completed:w.z.boolean(),notes:w.z.string().optional().nullable(),attachment:w.z.string().optional().nullable(),attachmentName:w.z.string().optional().nullable(),creationDate:w.z.string().datetime({offset:!0}).transform(e=>new Date(e)),completionDate:w.z.string().datetime({offset:!0}).optional().nullable().transform(e=>e?new Date(e):void 0),priority:w.z.enum(["low","medium","high"]),referenceLinks:w.z.array(w.z.string()).optional().nullable()}),tS=w.z.array(tk);function tC(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(!0),[h,x]=(0,r.useState)("creationDate"),[p,g]=(0,r.useState)("asc"),[v,y]=(0,r.useState)("My Tasks"),[w,N]=(0,r.useState)(!1),{toast:b}=(0,ed.dj)(),[k,S]=(0,r.useState)(!1),[C,D]=(0,r.useState)(!1),[A,T]=(0,r.useState)([]),[I,R]=(0,r.useState)(null),[E,z]=(0,r.useState)(!0),[L,F]=(0,r.useState)(!1),[O,_]=(0,r.useState)(!1),[P,M]=(0,r.useState)(null),[W,U]=(0,r.useState)(!1),[V,J]=(0,r.useState)("dynamic");(0,r.useEffect)(()=>{{try{let e=localStorage.getItem("tasks");if(e){let a=JSON.parse(e).map(e=>({...e,priority:e.priority||"medium",date:e.date?new Date(e.date):void 0,creationDate:e.creationDate?new Date(e.creationDate):new Date,completionDate:e.completionDate?new Date(e.completionDate):void 0,referenceLinks:e.referenceLinks||[]})),s=tS.safeParse(a.map(e=>{var t,a;return{...e,date:null==(t=e.date)?void 0:t.toISOString(),creationDate:e.creationDate.toISOString(),completionDate:null==(a=e.completionDate)?void 0:a.toISOString()}}));s.success?t(s.data):(console.error("Local storage validation error",s.error.format()),localStorage.removeItem("tasks"))}}catch(e){console.error("Failed to parse tasks from local storage",e),localStorage.removeItem("tasks")}let e=localStorage.getItem("sortKey");e&&x(e);let a=localStorage.getItem("sortDirection");a&&g(a);let s=localStorage.getItem("projectName");if(s)try{let e=JSON.parse(s);"string"==typeof e&&y(e)}catch(e){y("My Tasks")}try{let e=localStorage.getItem("location");e&&R(JSON.parse(e))}catch(e){console.error("Failed to parse location from local storage",e),localStorage.removeItem("location")}try{let e=localStorage.getItem("showWeatherWidget");e&&z(JSON.parse(e))}catch(e){console.error("Failed to parse showWeatherWidget from local storage",e),localStorage.removeItem("showWeatherWidget")}try{let e=localStorage.getItem("isHeaderSticky");e&&F(JSON.parse(e))}catch(e){console.error("Failed to parse isHeaderSticky from local storage",e),localStorage.removeItem("isHeaderSticky")}try{let e=localStorage.getItem("isFilterBarSticky");e&&_(JSON.parse(e))}catch(e){console.error("Failed to parse isFilterBarSticky from local storage",e),localStorage.removeItem("isFilterBarSticky")}try{let e=localStorage.getItem("weatherEffectMode");if(e){let t=JSON.parse(e);["dynamic","all","sunny","windy","cloudy","rain","snow","none"].includes(t)&&J(t)}}catch(e){console.error("Failed to parse weatherEffectMode from local storage",e),localStorage.removeItem("weatherEffectMode")}u(!1)}},[]),(0,r.useEffect)(()=>{if(!I||!E)return void M(null);let e=async()=>{U(!0);try{let e=await e7("".concat(I.lat,",").concat(I.lon));M(e)}catch(e){b({title:"Weather Error",description:e instanceof Error?e.message:"Failed to fetch weather data.",variant:"destructive"}),M(null)}finally{U(!1)}};e();let t=setInterval(e,9e5);return()=>clearInterval(t)},[I,E,b]),(0,r.useEffect)(()=>{d||localStorage.setItem("tasks",JSON.stringify(e))},[e,d]),(0,r.useEffect)(()=>{d||(localStorage.setItem("sortKey",h),localStorage.setItem("sortDirection",p))},[h,p,d]),(0,r.useEffect)(()=>{d||localStorage.setItem("projectName",JSON.stringify(v))},[v,d]),(0,r.useEffect)(()=>{d||(I?localStorage.setItem("location",JSON.stringify(I)):localStorage.removeItem("location"))},[I,d]),(0,r.useEffect)(()=>{d||localStorage.setItem("showWeatherWidget",JSON.stringify(E))},[E,d]),(0,r.useEffect)(()=>{d||localStorage.setItem("isHeaderSticky",JSON.stringify(L))},[L,d]),(0,r.useEffect)(()=>{d||localStorage.setItem("isFilterBarSticky",JSON.stringify(O))},[O,d]),(0,r.useEffect)(()=>{d||localStorage.setItem("weatherEffectMode",JSON.stringify(V))},[V,d]);let H=e=>{i(e),l(!0)},B=(a,s)=>{t(e.map(e=>e.id===a?{...e,completed:s,completionDate:s?new Date:void 0}:e))},q=a=>{t(e.filter(e=>e.id!==a))},Z=(0,r.useMemo)(()=>[...e].filter(e=>e.title.toLowerCase().includes(o.toLowerCase())||e.notes&&e.notes.toLowerCase().includes(o.toLowerCase())).sort((e,t)=>{let a="asc"===p?1:-1;switch(h){case"title":return e.title.localeCompare(t.title)*a;case"date":if(e.date&&!t.date)return -1*a;if(!e.date&&t.date)return+a;if(!e.date&&!t.date)return 0;return(e.date.getTime()-t.date.getTime())*a;case"completionDate":if(e.completionDate&&!t.completionDate)return -1*a;if(!e.completionDate&&t.completionDate)return+a;if(!e.completionDate&&!t.completionDate)return 0;return(e.completionDate.getTime()-t.completionDate.getTime())*a;case"priority":return-((tb[e.priority]-tb[t.priority])*a*1);default:return(e.creationDate.getTime()-t.creationDate.getTime())*a}}),[e,o,h,p]),Y=(0,r.useMemo)(()=>{let e=new Date().toDateString();return Z.filter(t=>t.date&&new Date(t.date).toDateString()===e&&!t.completed)},[Z]),G=(0,r.useMemo)(()=>{let e=new Date().toDateString();return Z.filter(t=>t.date&&!t.completed&&new Date(t.date).toDateString()!==e)},[Z]),K=(0,r.useMemo)(()=>Z.filter(e=>e.completed),[Z]);return(0,s.jsxs)("div",{className:"relative flex flex-col min-h-screen w-full bg-background",children:[E&&(0,s.jsx)(tj,{weather:P,mode:V}),(0,s.jsx)(j,{projectName:v,onOpenTaskDialog:()=>l(!0),onOpenSettingsDialog:()=>N(!0),isSticky:L}),(0,s.jsxs)(ef,{defaultValue:"today",className:"flex flex-col flex-1",children:[(0,s.jsx)("div",{className:(0,m.cn)("z-10 border-b bg-background/80 backdrop-blur-md",O&&"sticky",O&&(L?"top-20":"top-0")),children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Your Tasks"})}),E&&(0,s.jsx)(tN,{location:I,weather:P,isLoading:W}),(0,s.jsxs)("div",{className:"flex gap-4 w-full sm:w-auto flex-wrap justify-end items-center",children:[(0,s.jsxs)("div",{className:"relative w-full sm:w-auto sm:flex-grow",children:[(0,s.jsx)(eg.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(ee,{placeholder:"Search tasks...",className:"pl-9 w-full",value:o,onChange:e=>c(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(eY,{value:h,onValueChange:e=>x(e),children:[(0,s.jsx)(eK,{className:"w-full sm:w-auto",children:(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(ej.A,{className:"h-3.5 w-3.5"}),(0,s.jsx)(eG,{placeholder:"Sort by"})]})}),(0,s.jsxs)(e$,{children:[(0,s.jsx)(e0,{value:"creationDate",children:"Creation Date"}),(0,s.jsx)(e0,{value:"date",children:"Due Date"}),(0,s.jsx)(e0,{value:"title",children:"Title"}),(0,s.jsx)(e0,{value:"completionDate",children:"Completion Date"}),(0,s.jsx)(e0,{value:"priority",children:"Priority"})]})]}),(0,s.jsxs)(f,{variant:"outline",size:"icon",onClick:()=>g(e=>"asc"===e?"desc":"asc"),children:["asc"===p?(0,s.jsx)(ev.A,{className:"h-4 w-4"}):(0,s.jsx)(ey.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle sort direction"})]})]})]})]}),(0,s.jsxs)(eh,{className:"grid w-full grid-cols-4 mt-4",children:[(0,s.jsx)(ex,{value:"all",children:"All"}),(0,s.jsx)(ex,{value:"today",children:"Today"}),(0,s.jsx)(ex,{value:"upcoming",children:"Upcoming"}),(0,s.jsx)(ex,{value:"completed",children:"Completed"})]})]})}),(0,s.jsx)("main",{className:"flex-1 w-full",children:(0,s.jsx)("div",{className:"container mx-auto py-8 px-4 flex flex-col items-center",children:(0,s.jsx)("div",{className:"w-full max-w-4xl",children:(0,s.jsx)("div",{className:"rounded-lg border bg-background/80 backdrop-blur-sm shadow-sm relative overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)(ep,{value:"today",className:"mt-0",children:d?(0,s.jsx)(e2,{}):(0,s.jsx)(eH,{tasks:Y,onToggleComplete:B,onDelete:q,onEdit:H})}),(0,s.jsx)(ep,{value:"upcoming",className:"mt-0",children:d?(0,s.jsx)(e2,{}):(0,s.jsx)(eH,{tasks:G,onToggleComplete:B,onDelete:q,onEdit:H})}),(0,s.jsx)(ep,{value:"completed",className:"mt-0",children:d?(0,s.jsx)(e2,{}):(0,s.jsx)(eH,{tasks:K,onToggleComplete:B,onDelete:q,onEdit:H})}),(0,s.jsx)(ep,{value:"all",className:"mt-0",children:d?(0,s.jsx)(e2,{}):(0,s.jsx)(eH,{tasks:Z,onToggleComplete:B,onDelete:q,onEdit:H})})]})})})})})]}),(0,s.jsx)(em,{isOpen:a,onClose:()=>{l(!1),i(null)},onSubmit:a=>{if(n)t(e.map(e=>e.id===n.id?{...e,...a}:e));else{let e={...a,id:crypto.randomUUID(),completed:!1,creationDate:new Date};t(t=>[...t,e])}i(null)},task:n}),(0,s.jsx)(tl,{isOpen:w,onClose:()=>N(!1),projectName:v,onUpdateProjectName:e=>{y(e)},onExportClick:()=>{if(0===e.length)return void b({title:"No Tasks",description:"There are no tasks to export.",variant:"destructive"});S(!0)},onImportFileSelect:e=>{let t=new FileReader;t.onload=e=>{try{var t;let a=null==(t=e.target)?void 0:t.result;if("string"!=typeof a)throw Error("Could not read file content.");let s=JSON.parse(a),r=tS.safeParse(s);if(!r.success)throw console.error("Import validation error:",r.error.format()),Error("The selected file has an invalid format or content.");T(r.data),D(!0)}catch(e){b({title:"Import Failed",description:e instanceof Error?e.message:"An unknown error occurred.",variant:"destructive"})}},t.onerror=()=>{b({title:"Import Failed",description:"Could not read the selected file.",variant:"destructive"})},t.readAsText(e)},location:I,onLocationChange:R,showWeatherWidget:E,onToggleWeatherWidget:z,isHeaderSticky:L,onToggleHeaderSticky:F,isFilterBarSticky:O,onToggleFilterBarSticky:_,weatherEffectMode:V,onWeatherEffectModeChange:J}),(0,s.jsx)(tc,{isOpen:k,onClose:()=>S(!1),tasks:e,onExport:e=>{if(0===e.length)return void b({title:"No Tasks Selected",description:"Please select at least one task to export.",variant:"destructive"});let t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="my-tasks-backup-".concat(new Date().toISOString().slice(0,10),".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),b({title:"Export successful",description:"".concat(e.length," tasks have been downloaded.")})}}),(0,s.jsx)(tx,{isOpen:C,onClose:()=>D(!1),tasksToImport:A,onConfirmImport:a=>{let s=new Set(e.map(e=>e.id)),r=a.map(e=>({...e,id:s.has(e.id)?crypto.randomUUID():e.id}));t(e=>[...e,...r]),b({title:"Import Successful",description:"Successfully imported ".concat(r.length," tasks.")})}})]})}},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(2115);let r=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=i(c,e),o.forEach(e=>{e(c)})}function m(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(c);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(2596),r=a(9688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[774,304,441,684,358],()=>t(4245)),_N_E=e.O()}]);